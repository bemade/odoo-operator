# Default values for odoo-operator.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Operator deployment configuration
operator:
  # Operator container image (include the tag, e.g. registry.bemade.org/bemade/odoo-operator:v0.12.0)
  image: registry.bemade.org/bemade/odoo-operator:latest

  # Resource limits and requests for the operator
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 250m
      memory: 256Mi
  # Node placement
  affinity: {}
  tolerations: []

# Image pull secrets for private registries
imagePullSecrets:
  - domain: registry.bemade.org
    username: username
    password: password


# Default configuration applied by the operator when an OdooInstance does not
# specify these fields. These are cluster-specific values that vary per installation.
defaults:
  # Default Odoo container image when spec.image is not set.
  odooImage: "odoo:18.0"
  # Default StorageClass for filestore PVCs when spec.filestore.storageClass is not set.
  storageClass: "standard"
  # Default PVC size for filestore when spec.filestore.storageSize is not set.
  storageSize: "2Gi"
  # Default IngressClass when spec.ingress.class is not set. Leave empty to omit the annotation.
  ingressClass: ""
  # Default cert-manager ClusterIssuer when spec.ingress.issuer is not set.
  ingressIssuer: ""
  # Default CPU/memory resource requests and limits for Odoo pods.
  resources:
    requests:
      cpu: 400m
      memory: 256Mi
    limits:
      cpu: 2000m
      memory: 4Gi
  # Default node affinity for Odoo pods.
  affinity: {}
  # Default tolerations for Odoo pods.
  tolerations: []

# Validating webhook configuration
webhook:
  # ClusterIssuer used by cert-manager to issue the webhook TLS certificate.
  certIssuer: "selfsigned-cluster-issuer"

# Odoo Manager ServiceAccount (for external Odoo instances to manage the cluster)
odooManager:
  # Enable creation of ServiceAccount and RBAC for Odoo manager
  enabled: false
  # ServiceAccount name
  serviceAccountName: "odoo-manager"

# PostgreSQL cluster configuration
# Reference an existing secret containing the cluster configuration.
# The secret must contain a clusters.yaml key with YAML content like:
#
#   main:
#     host: "postgres.postgres.svc.cluster.local"
#     port: 5432
#     adminUser: "postgres"
#     adminPassword: "secret"
#     default: true
#   analytics:
#     host: "analytics-db.database.svc.cluster.local"
#     port: 5432
#     adminUser: "postgres"
#     adminPassword: "secret"
#     default: false
#
# Exactly one cluster must have 'default: true'.
# Create the secret before installing the chart:
#   kubectl create secret generic postgres-clusters -n odoo-operator \
#     --from-file=clusters.yaml=my-clusters.yaml
postgresClustersSecretRef:
  name: ""  # Required: name of the secret containing clusters.yaml
